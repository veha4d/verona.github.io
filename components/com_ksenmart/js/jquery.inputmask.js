/**
 * @license Input Mask plugin for jquery
 * http://github.com/RobinHerbots/jquery.inputmask
 * Copyright (c) 2010 - 2012 Robin Herbots
 * Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
 * Version: 1.2.2
 */

!function(a){void 0==a.fn.inputmask&&(a.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},escapeChar:"\\",mask:null,oncomplete:a.noop,onincomplete:a.noop,oncleared:a.noop,repeat:0,greedy:!0,autoUnmask:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},onKeyUp:a.noop,onKeyDown:a.noop,showMaskOnHover:!0,numericInput:!1,radixPoint:".",definitions:{9:{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451]",cardinality:1},"*":{validator:"[A-Za-z\u0410-\u044f\u0401\u04510-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,16,17,18,20,27,33,34,35,36,37,38,39,40,46,91,93,108]},val:a.fn.val},a.fn.inputmask=function(b,c){function m(a){var b=document.createElement("input"),a="on"+a,c=a in b;return c||(b.setAttribute(a,"return;"),c="function"==typeof b[a]),b=null,c}function n(b){var e=d.aliases[b];return e?(e.alias&&n(e.alias),a.extend(!0,d,e),a.extend(!0,d,c),!0):!1}function o(){var b=!1,c=0;1==d.mask.length&&0==d.greedy&&(d.placeholder="");for(var e=a.map(d.mask.split(""),function(a){var f=[];if(a==d.escapeChar)b=!0;else if(a!=d.optionalmarker.start&&a!=d.optionalmarker.end||b){var g=d.definitions[a];if(g&&!b)for(var h=0;h<g.cardinality;h++)f.push(t(c+h));else f.push(a),b=!1;return c+=f.length,f}}),f=e.slice(),g=1;g<d.repeat&&d.greedy;g++)f=f.concat(e.slice());return f}function p(){var b=!1,c=!1,e=!1;return a.map(d.mask.split(""),function(a){var g=[];if(a==d.escapeChar)c=!0;else if(a!=d.optionalmarker.start||c){if(a!=d.optionalmarker.end||c){var h=d.definitions[a];if(h&&!c){for(var i=h.prevalidator,j=i?i.length:0,k=1;k<h.cardinality;k++){var l=j>=k?i[k-1]:[],m=l.validator,n=l.cardinality;g.push({fn:m?"string"==typeof m?new RegExp(m):new function(){this.test=m}:new RegExp("."),cardinality:n?n:1,optionality:b,newBlockMarker:1==b?e:!1,offset:0,casing:h.casing,def:a}),1==b&&(e=!1)}g.push({fn:h.validator?"string"==typeof h.validator?new RegExp(h.validator):new function(){this.test=h.validator}:new RegExp("."),cardinality:h.cardinality,optionality:b,newBlockMarker:e,offset:0,casing:h.casing,def:a})}else g.push({fn:null,cardinality:0,optionality:b,newBlockMarker:e,offset:0,casing:null,def:a}),c=!1;return e=!1,g}b=!1,e=!0}else b=!0,e=!0})}function q(a,b,c,e){if(0>a||a>=u())return!1;for(var f=s(a),g=b?1:0,h="",i=l[f].cardinality;i>g;i--)h+=y(c,f-(i-1));return b&&(h+=b),null!=l[f].fn?l[f].fn.test(h,c,a,e,d):!1}function r(a){var b=s(a),c=l[b];return void 0!=c?c.fn:!1}function s(a){return a%l.length}function t(a){return d.placeholder.charAt(a%d.placeholder.length)}function u(){var a=k.length;return!d.greedy&&d.repeat>1&&(a+=k.length*(d.repeat-1)),a}function v(a,b){var c=u();if(b>=c)return c;for(var d=b;++d<c&&!r(d););return d}function w(a,b){var c=b;if(0>=c)return 0;for(;--c>0&&!r(c););return c}function x(a,b,c){var d=l[s(b)],e=c;if(void 0!=e)switch(d.casing){case"upper":e=c.toUpperCase();break;case"lower":e=c.toLowerCase()}a[b]=e}function y(a,b,c){return c&&(b=z(a,b)),a[b]}function z(a,b,c){var d;if(c)for(;0>b&&a.length<u();)for(d=k.length-1,b=k.length;void 0!==k[d];)a.unshift(k[d--]);else for(;void 0==a[b]&&a.length<u();)for(d=0;void 0!==k[d];)a.push(k[d++]);return b}function A(a,b,c){a._valueSet(b.join("")),void 0!=c&&(g?setTimeout(function(){I(a,c)},100):I(a,c))}function B(a,b,c){for(var d=b,e=u();c>d&&e>d;d++)x(a,d,y(k.slice(),d))}function C(a,b){var c=s(b);x(a,b,y(k,c))}function D(b,c,e,f){var g=a(b).data("inputmask").isRTL,h=F(b._valueGet(),g).split("");if(g){var i=u(),j=h.reverse();j.length=i;for(var m=0;i>m;m++){var n=s(i-(m+1));null==l[n].fn&&j[m]!=y(k,n)?(j.splice(m,0,y(k,n)),j.length=i):j[m]=j[m]||y(k,n)}h=j.reverse()}B(c,0,c.length),c.length=k.length;for(var w,o=-1,p=-1,i=u(),z=h.length,D=0==z?i:-1,m=0;z>m;m++)for(var E=p+1;i>E;E++){if(r(E)){var G=h[m];(w=q(E,G,c,!e))!==!1?(w!==!0&&(E=w.pos||E,G=w.c||G),x(c,E,G),o=p=E):(C(c,E),G==t(E)&&(p=E,D=E));break}if(C(c,E),o==p&&(o=E),p=E,h[m]==y(c,E))break}if(0==d.greedy)for(var H=F(c.join(""),g).split("");c.length!=H.length;)g?c.shift():c.pop();return e&&A(b,c),g?d.numericInput?-1!=a.inArray(d.radixPoint,c)&&f!==!0?a.inArray(d.radixPoint,c):v(c,i):v(c,D):v(c,o)}function E(a){var b=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];return a.replace(new RegExp("(\\"+b.join("|\\")+")","gim"),"\\$1")}function F(a,b){return b?a.replace(new RegExp("^("+E(k.join(""))+")*"),""):a.replace(new RegExp("("+E(k.join(""))+")*$"),"")}function G(b,c){D(b,c,!1);var d=c.slice();if(a(b).data("inputmask").isRTL)for(var e=0;e<=d.length-1;e++){var f=s(e);if(!l[f].optionality)break;if(t(e)!=c[e]&&r(e))break;d.splice(0,1)}else for(var e=d.length-1;e>=0;e--){var f=s(e);if(!l[f].optionality)break;if(t(e)!=c[e]&&r(e))break;d.pop()}A(b,d)}function H(b,c){var d=b[0];if(!l||c!==!0&&b.hasClass("hasDatepicker"))return d._valueGet();var e=k.slice();return D(d,e),a.map(e,function(a,b){return r(b)&&a!=y(k.slice(),b)?a:null}).join("")}function I(a,b,c){var e=a.jquery&&a.length>0?a[0]:a;if("number"!=typeof b){var h=g?i:null,i=null;if(null==h){if(e.setSelectionRange)b=e.selectionStart,c=e.selectionEnd;else if(document.selection&&document.selection.createRange){var f=document.selection.createRange();b=0-f.duplicate().moveStart("character",-1e5),c=b+f.text.length}h={begin:b,end:c}}return h}if(c="number"==typeof c?c:b,0==d.insertMode&&b==c&&c++,e.setSelectionRange)e.setSelectionRange(b,c);else if(e.createTextRange){var f=e.createTextRange();f.collapse(!0),f.moveEnd("character",c),f.moveStart("character",b),f.select()}e.focus(),g&&c!=e.selectionEnd&&(i={begin:b,end:c})}function J(b){function M(a){for(var b=!0,c=a._valueGet(),d=c.length,e=0;d>e;e++)if(r(e)&&c.charAt(e)==t(e)){b=!1;break}return b}function N(b){var c=a._data(b).events;a.each(c,function(c,d){a(b).bind(c+".inputmask",function(a){return this.readOnly||this.disabled?(a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault(),!1):void 0});for(var e=d[d.length-1],f=d.length-1;f>0;f--)d[f]=d[f-1];d[0]=e})}function O(b){var c;Object.getOwnPropertyDescriptor&&(c=Object.getOwnPropertyDescriptor(b,"value")),c&&c.get?b._valueGet||(b._valueGet=c.get,b._valueSet=c.set,Object.defineProperty(b,"value",{get:function(){var b=a(this),c=a(this).data("inputmask");return c&&c.autoUnmask?b.inputmask("unmaskedvalue"):this._valueGet()!=c._buffer.join("")?this._valueGet():""},set:function(b){this._valueSet(b),a(this).triggerHandler("setvalue.inputmask")}})):document.__lookupGetter__&&b.__lookupGetter__("value")?b._valueGet||(b._valueGet=b.__lookupGetter__("value"),b._valueSet=b.__lookupSetter__("value"),b.__defineGetter__("value",function(){var b=a(this),c=a(this).data("inputmask");return c&&c.autoUnmask?b.inputmask("unmaskedvalue"):this._valueGet()!=c._buffer.join("")?this._valueGet():""}),b.__defineSetter__("value",function(b){this._valueSet(b),a(this).triggerHandler("setvalue.inputmask")})):(b._valueGet||(b._valueGet=function(){return this.value},b._valueSet=function(a){this.value=a}),1!=a.fn.val.inputmaskpatch&&(a.fn.val=function(){if(0==arguments.length){var b=a(this);if(b.data("inputmask")){if(b.data("inputmask").autoUnmask)return b.inputmask("unmaskedvalue");var c=a.inputmask.val.apply(b);return c!=b.data("inputmask")._buffer.join("")?c:""}return a.inputmask.val.apply(b)}var d=arguments;return this.each(function(){var b=a(this),c=a.inputmask.val.apply(b,d);return b.data("inputmask")&&b.triggerHandler("setvalue.inputmask"),c})},a.extend(a.fn.val,{inputmaskpatch:!0})))}function P(a,b,c){for(;!r(a)&&a-1>=0;)a--;for(var d=a;b>d&&d<u();d++)if(r(d)){C(i,d);var e=v(i,d),f=y(i,e);if(f!=t(e)){if(e<u()&&q(d,f,i,!0)!==!1&&l[s(d)].def==l[s(e)].def)x(i,d,y(i,e)),C(i,e);else if(r(d))break}else if(void 0==c)break}else C(i,d);return void 0!=c&&x(i,H?b:w(i,b),c),i=F(i.join(""),H).split(""),0==i.length&&(i=k.slice()),a}function Q(a,b,c,d){for(var e=a;b>=e&&e<u();e++)if(r(e)){var f=y(i,e);if(x(i,e,c),f!=t(e)){var g=v(i,e);if(!(g<u()))break;if(q(g,f,i,!0)!==!1&&l[s(e)].def==l[s(g)].def)c=f;else{if(r(g))break;c=f}}else if(d!==!0)break}else C(i,e);var h=i.length;return i=F(i.join(""),H).split(""),0==i.length&&(i=k.slice()),b-(h-i.length)}function R(b){m=!1;var c=this,e=b.keyCode,g=I(c);if(d.numericInput){var h=c._valueGet(),l=h.indexOf(d.radixPoint);-1!=l&&(H=g.begin<=l||g.end<=l)}if(e==d.keyCode.BACKSPACE||e==d.keyCode.DELETE||f&&127==e){var o=u();if(0==g.begin&&g.end==o)i=k.slice(),A(c,i),I(c,D(c,i,!1));else if(g.end-g.begin>1||1==g.end-g.begin&&d.insertMode)B(i,g.begin,g.end),A(c,i,H?D(c,i,!1):g.begin);else{var q=g.begin-(e==d.keyCode.DELETE?0:1);p>q&&e==d.keyCode.DELETE&&(q=p),q>=p&&(d.numericInput&&d.greedy&&e==d.keyCode.DELETE&&i[q]==d.radixPoint&&(q=v(i,q),H=!1),H?(q=Q(p,q,t(q),!0),q=d.numericInput&&d.greedy&&e==d.keyCode.BACKSPACE&&i[q+1]==d.radixPoint?q+1:v(i,q)):q=P(q,o),A(c,i,q))}return c._valueGet()==k.join("")&&a(c).trigger("cleared"),!1}if(e==d.keyCode.END||e==d.keyCode.PAGE_DOWN)return setTimeout(function(){var a=D(c,i,!1,!0);d.insertMode||a!=u()||b.shiftKey||a--,I(c,b.shiftKey?g.begin:a,a)},0),!1;if(e==d.keyCode.HOME||e==d.keyCode.PAGE_UP)return I(c,0,b.shiftKey?g.begin:0),!1;if(e==d.keyCode.ESCAPE)return c._valueSet(j),I(c,0,D(c,i)),!1;if(e==d.keyCode.INSERT)return d.insertMode=!d.insertMode,I(c,d.insertMode||g.begin!=u()?g.begin:g.begin-1),!1;if(b.ctrlKey&&88==e)setTimeout(function(){I(c,D(c,i,!0))},0);else if(!d.insertMode){if(e==d.keyCode.RIGHT){var r=g.begin==g.end?g.end+1:g.end;return r=r<u()?r:g.end,I(c,b.shiftKey?g.begin:r,b.shiftKey?r+1:r),!1}if(e==d.keyCode.LEFT){var r=g.begin-1;return r=r>0?r:0,I(c,r,b.shiftKey?g.end:r),!1}}d.onKeyDown.call(this,b,d),n=-1!=a.inArray(e,d.ignorables)}function S(b){if(m)return!1;m=!0;var c=this,e=a(c);b=b||window.event;var f=b.which||b.charCode||b.keyCode;if(d.numericInput&&f==d.radixPoint.charCodeAt(d.radixPoint.length-1)){var h=c._valueGet(),j=h.indexOf(d.radixPoint);I(c,v(i,-1!=j?j:u()))}if(b.ctrlKey||b.altKey||b.metaKey||n)return!0;if(f){e.trigger("input");var k=I(c),l=String.fromCharCode(f),o=u();if(B(i,k.begin,k.end),H){var s,r=d.numericInput?k.end:w(i,k.end);if((s=q(r==o||y(i,r)==d.radixPoint?w(i,r):r,l,i,!1))!==!1){s!==!0&&(r=s.pos||k,l=s.c||l);var C=p;if(1==d.insertMode){if(1==d.greedy)for(var D=i.slice();y(D,C,!0)!=t(C)&&r>=C;)C=C==o?o+1:v(i,C);if(!(r>=C&&(d.greedy||i.length<o)))return!1;if(i[p]!=t(p)&&i.length<o){var E=z(i,-1,H);0!=k.end&&(r+=E),o=i.length}P(C,d.numericInput?w(i,r):r,l)}else x(i,d.numericInput?w(i,r):r,l);A(c,i,d.numericInput&&0==r?v(i,r):r),setTimeout(function(){M(c)&&e.trigger("complete")},0)}else g&&A(c,i,k.begin)}else{var s,r=v(i,k.begin-1);if(z(i,r,H),(s=q(r,l,i,!1))!==!1){if(s!==!0&&(r=s.pos||r,l=s.c||l),1==d.insertMode){for(var F=u(),D=i.slice();y(D,F,!0)!=t(F)&&F>=r;)F=0==F?-1:w(i,F);if(!(F>=r))return!1;Q(r,i.length,l)}else x(i,r,l);var G=v(i,r);A(c,i,G),setTimeout(function(){M(c)&&e.trigger("complete")},0)}else g&&A(c,i,k.begin)}return!1}}function T(b){var c=a(this),e=this,f=b.keyCode;d.onKeyUp.call(this,b,d),f==d.keyCode.TAB&&c.hasClass("focus.inputmask")&&0==e._valueGet().length&&(i=k.slice(),A(e,i),H||I(e,0),j=e._valueGet())}var c=a(b);if(c.is(":input")){d.greedy=d.greedy?d.greedy:0==d.repeat;var h=c.prop("maxLength");u()>h&&h>-1&&(h<k.length&&(k.length=h),0==d.greedy&&(d.repeat=Math.round(h/k.length))),c.prop("maxLength",2*u()),c.data("inputmask",{tests:l,_buffer:k,greedy:d.greedy,repeat:d.repeat,autoUnmask:d.autoUnmask,definitions:d.definitions,isRTL:!1}),O(b);var i=k.slice(),j=b._valueGet(),m=!1,n=!1,o=-1,p=v(i,-1),H=(w(i,u()),!1);if("rtl"==b.dir||d.numericInput){b.dir="ltr",c.css("text-align","right"),c.removeAttr("dir");var J=c.data("inputmask");J.isRTL=!0,c.data("inputmask",J),H=!0}c.unbind(".inputmask"),c.removeClass("focus.inputmask"),c.bind("mouseenter.inputmask",function(){var b=a(this),c=this;if(!b.hasClass("focus.inputmask")&&d.showMaskOnHover){var e=c._valueGet().length;e<i.length&&(0==e&&(i=k.slice()),A(c,i))}}).bind("blur.inputmask",function(){var b=a(this),c=this,e=c._valueGet();b.removeClass("focus.inputmask"),e!=j&&b.change(),d.clearMaskOnLostFocus&&(e==k.join("")?c._valueSet(""):G(c,i)),M(c)||(b.trigger("incomplete"),d.clearIncomplete&&(d.clearMaskOnLostFocus?c._valueSet(""):(i=k.slice(),A(c,i))))}).bind("focus.inputmask",function(){var b=a(this),c=this;if(!b.hasClass("focus.inputmask")&&!d.showMaskOnHover){var e=c._valueGet().length;e<i.length&&(0==e&&(i=k.slice()),I(c,D(c,i,!0)))}b.addClass("focus.inputmask"),j=c._valueGet()}).bind("mouseleave.inputmask",function(){var b=a(this),c=this;d.clearMaskOnLostFocus&&(b.hasClass("focus.inputmask")||(c._valueGet()==k.join("")||""==c._valueGet()?c._valueSet(""):G(c,i)))}).bind("click.inputmask",function(){var a=this;setTimeout(function(){var b=I(a);if(b.begin==b.end){var c=b.begin;o=D(a,i,!1),H?I(a,c>o&&(q(c,i[c],i,!0)!==!1||!r(c))?c:o):I(a,o>c&&(q(c,i[c],i,!0)!==!1||!r(c))?c:o)}},0)}).bind("dblclick.inputmask",function(){var a=this;setTimeout(function(){I(a,0,o)},0)}).bind("keydown.inputmask",R).bind("keypress.inputmask",S).bind("keyup.inputmask",T).bind(e+".inputmask, dragdrop.inputmask, drop.inputmask",function(){var a=this;setTimeout(function(){I(a,D(a,i,!0))},0)}).bind("setvalue.inputmask",function(){var a=this;j=a._valueGet(),D(a,i,!0),a._valueGet()==k.join("")&&a._valueSet("")}).bind("complete.inputmask",d.oncomplete).bind("incomplete.inputmask",d.onincomplete).bind("cleared.inputmask",d.oncleared),o=D(b,i,!0);var K;try{K=document.activeElement}catch(L){}K===b?(c.addClass("focus.inputmask"),I(b,o)):d.clearMaskOnLostFocus&&(b._valueGet()==k.join("")?b._valueSet(""):G(b,i)),N(b)}}var d=a.extend(!0,{},a.inputmask.defaults,c),e=m("paste")?"paste":"input",f=null!=navigator.userAgent.match(/iphone/i),g=null!=navigator.userAgent.match(/android.*mobile safari.*/i);if(g){var h=navigator.userAgent.match(/mobile safari.*/i),i=parseInt(new RegExp(/[0-9]+/).exec(h));g=533>=i}if("string"==typeof b)switch(b){case"mask":var k=o(),l=p();return this.each(function(){J(this)});case"unmaskedvalue":var l=this.data("inputmask").tests,k=this.data("inputmask")._buffer;return d.greedy=this.data("inputmask").greedy,d.repeat=this.data("inputmask").repeat,d.definitions=this.data("inputmask").definitions,H(this);case"remove":var l,k;return this.each(function(){var b=a(this),c=this;setTimeout(function(){if(b.data("inputmask")){l=b.data("inputmask").tests,k=b.data("inputmask")._buffer,d.greedy=b.data("inputmask").greedy,d.repeat=b.data("inputmask").repeat,d.definitions=b.data("inputmask").definitions,c._valueSet(H(b,!0)),b.removeData("inputmask"),b.unbind(".inputmask"),b.removeClass("focus.inputmask");var a;Object.getOwnPropertyDescriptor&&(a=Object.getOwnPropertyDescriptor(c,"value")),a&&a.get?c._valueGet&&Object.defineProperty(c,"value",{get:c._valueGet,set:c._valueSet}):document.__lookupGetter__&&c.__lookupGetter__("value")&&c._valueGet&&(c.__defineGetter__("value",c._valueGet),c.__defineSetter__("value",c._valueSet)),delete c._valueGet,delete c._valueSet}},0)});case"getemptymask":return this.data("inputmask")?this.data("inputmask")._buffer.join(""):"";case"hasMaskedValue":return this.data("inputmask")?!this.data("inputmask").autoUnmask:!1;default:n(b)||(d.mask=b);var k=o(),l=p();return this.each(function(){J(this)})}if("object"==typeof b){d=a.extend(!0,{},a.inputmask.defaults,b),n(d.alias);var k=o(),l=p();return this.each(function(){J(this)})}})}(jQuery);